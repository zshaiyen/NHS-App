{% extends "base.html" %}

<!-- body -->
{% block content %}
<h2>Event Details</h2>
{% if log_id %}
<form action="{{ url_for('loghours') }}/{{ log_id }}" method="POST" class="was-validated">
{% else %}
<form action="{{ url_for('loghours') }}" id="logForm" method="POST" class="was-validated">
{% endif %}
    <div class="form-floating mb-3 mt-3">
    {% if log_id %}
        <input class="form-control" type="text" name="event_category" id="event_category" value="{{ event_category }}" disabled />
        <label class="form-label" for="event_category">Category</label>
    {% else %}
        <select class="form-select" name="event_category" id="event_category" required>
            <option disabled selected value>--pick a Category --</option>
            {% for cat in category_list %}
            <option value="{{ cat['name'] }}" {% if cat['name'] == event_category %}selected{% endif %}>{{ cat['name'] }}</option>
            {% endfor %}
        </select>
        <label class="form-label" for="event_category">Category</label>
    {% endif %}
    </div>

    <div class="form-floating mb-3 mt-3">
        <input class="form-control" type="text" id="event_name" name="event_name" placeholder="Event Name" {% if event_name %}value="{{ event_name }}"{% endif %} required oninput="getLocation();">
        <label for="event_name">Event Name</label>
    </div>

    <div class="form-floating mb-3 mt-3">
        <input class="form-control" type="date" id="event_date" name="event_date" placeholder="Enter event date" value="{{ event_date }}" required>
        <label for="event_date">Event Date</label>
    </div>

    <div class="form-floating mb-3 mt-3">
        <input class="form-control" type="text" id="event_supervisor" name="event_supervisor" placeholder="Enter supervisor name" {% if event_supervisor %}value="{{ event_supervisor }}"{% endif %}>
        <label for="event_supervisor">Event Supervisor</label>
    </div>

    <div class="form-floating mb-3 mt-3">
        <input class="form-control" type="number" class="hours" id="hours_worked" name="hours_worked" step="0.5" min="0" max="16"
            value="{{ hours_worked }}" required>
        <label for="hours_worked">Hours Worked</label>
    </div>

    {% if not log_id %}
    <iframe src="{{url_for('static', filename='img/signature.svg')}}" scrolling="no"></iframe>
    <p><button type="button" class="btn btn-danger" onclick="clearSignature()">Clear signature</button></p>

    <input type="hidden" id="pathdata" name="pathdata" value="" required>
    <input type="hidden" id="coords" name="coords" value="">
    <input type="hidden" id="coords_accuracy" name="coords_accuracy" value="">

    {% endif %}
    <br />
    {% if log_id %}
    <input class="form-control btn btn-success" type="submit" value="Update Verification Log">
    {% else %}
    <input class="form-control btn btn-success" type="button" value="Save Verification Log" onClick="showSignature()">
    {% endif %}
</form>

{% endblock %}